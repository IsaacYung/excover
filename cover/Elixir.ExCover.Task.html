<!DOCTYPE html>
<html>
  <head>
    <title>Elixir.ExCover.Task</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/source.css" type="text/css" media="screen" charset="utf-8" />
    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
  </head>

  <body>
    <div id="content">
      <h1>Elixir.ExCover.Task Coverage Source Code</h1>

      <table class="source">
        <thead>
          <tr>
            <th>Line Number</th><th>Covered Lines</th><th>Source Code</th>
          </tr>
        </thead>
        <tbody>
          <tr class="source"><td class="num"> 1</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task"></a>
    
    <pre class="irrelevant">defmodule ExCover.Task do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 2</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  require EEx
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 3</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 4</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  require Logger
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 5</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 6</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @type mod_cover :: [{String.t, {integer, integer}}]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 7</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @type fun_cover :: [{mfa, {integer, integer}}]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 8</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 9</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @doc """
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 10</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  Starts the `ExCover` coverage data generation. An additional option
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 11</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  is
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 12</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 13</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      log: :error
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 14</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 15</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  which sets the log-level of the Elixir Logger application. Default value
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 16</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  is `:error`. For debugging purposes, it can be set to :debug. In this case,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 17</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  the output is quite noisy...
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 18</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  """
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 19</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.start.2"></a>
    
    <pre class="irrelevant">  def start(compile_path, opts) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 20</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    Mix.shell.info "ExCover compiling modules ... "
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 21</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    Mix.shell.info "compile_path is #{inspect compile_path}"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 22</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    Mix.shell.info "Options are: #{inspect opts}"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 23</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    :cover.start
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 24</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    :cover.compile_beam_directory(compile_path |&gt; to_char_list)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 25</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 26</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    if :application.get_env(:cover, :started) != {:ok, true} do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 27</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      :application.set_env(:cover, :started, true)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 28</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 29</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 30</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    output = opts[:output]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 31</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    fn() -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 32</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      Mix.shell.info "\nGenerating cover results ... "
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 33</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      Application.ensure_started(:logger)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 34</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      Logger.configure(level: Keyword.get(opts, :log, :error))
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 35</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      File.mkdir_p!(output)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 36</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 37</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      # determine all modules to analyze
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 38</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      all_modules = :cover.modules
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 39</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                    |&gt; filter_modules(Keyword.get(opts, :ignore_modules, []))
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 40</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 41</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      Enum.each all_modules, fn(mod) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 42</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        # :cover.analyse_to_file(mod, '#{output}/#{mod}.1.html', [:html])
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 43</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">        write_html_file(mod, output)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 44</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 45</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      {mods, funcs} = coverage_data(all_modules)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 46</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      {mods_sum, total} = calculate_summary(mods)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 47</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 48</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      write_module_overview(mods_sum, total, output)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 49</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      write_function_overview(funcs, output)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 50</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      generate_assets(output)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 51</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      # Text overview output
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 52</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      if Keyword.get(opts, :console_log, true) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 53</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">        puts_module_overview(mods_sum, total)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 54</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 55</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      # ask for coveralls option
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 56</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      if (running_travis?() and post_to_coveralls?(opts)) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 57</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">        post_coveralls(:cover.modules, output, travis_job_id())
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 58</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 59</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 60</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 61</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 62</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.filter_modules.2"></a>
    
    <pre class="irrelevant">  def filter_modules(all_modules, ignore_list) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 63</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    all_modules
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 64</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    |&gt; Enum.reject(fn m -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 65</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      ignore_list |&gt; Enum.member?(m)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 66</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 67</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    |&gt; Enum.filter(fn m -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 68</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      case Atom.to_string(m) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 69</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        "Elixir." &lt;&gt; _rest -&gt; true
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 70</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        _ -&gt; false
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 71</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 72</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 73</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 74</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 75</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @doc "is post to coveralls requested?"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 76</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  def post_to_coveralls?(nil), do: post_to_coveralls?([])
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 77</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.post_to_coveralls?.1"></a>
    
    <pre class="irrelevant">  def post_to_coveralls?(opts) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 78</td>
  <td class="num">3</td>
  <td class="elixir">
    
    <pre class="covered">    Keyword.get(opts, :coveralls, false)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 79</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 80</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 81</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @spec running_travis?(%{String.t =&gt; String.t}) :: String.t
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 82</td>
  <td class="num">0</td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.running_travis?.1"></a>
    
    <pre class="not_covered">  def running_travis?(env \\ System.get_env()) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 83</td>
  <td class="num">3</td>
  <td class="elixir">
    
    <pre class="covered">    case env["TRAVIS"] do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 84</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      "true" -&gt; true
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 85</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      _ -&gt; false
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 86</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 87</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 88</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 89</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @doc "gets the travis job id out of the environment"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 90</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @spec travis_job_id(%{String.t =&gt; String.t}) :: String.t
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 91</td>
  <td class="num">0</td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.travis_job_id.1"></a>
    
    <pre class="not_covered">  def travis_job_id(env \\ System.get_env()) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 92</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    env["TRAVIS_JOB_ID"]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 93</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 94</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 95</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @spec post_coveralls([atom], String.t, String.t, String.t) :: :ok
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 96</td>
  <td class="num">0</td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.post_coveralls.4"></a>
    
    <pre class="not_covered">  def post_coveralls(mods, output, job_id, url \\ "https://coveralls.io/api/v1/jobs") do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 97</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    IO.puts "post to coveralls"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 98</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    Application.ensure_all_started(:hackney)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 99</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    source = ExCover.Source.coveralls_data(mods)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 100</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    body = Poison.encode!(%{
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 101</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      :service_name =&gt; "travis-ci",
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 102</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      :service_job_id =&gt; job_id,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 103</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      :source_files =&gt; source
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 104</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    })
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 105</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    filename = "./#{output}/coveralls.json"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 106</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    File.write(filename, body)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 107</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    response = send_http(url, filename, body)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 108</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    IO.puts("Response: #{inspect response}")
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 109</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 110</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 111</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.send_http.3"></a>
    
    <pre class="irrelevant">  def send_http(url, filename, _body) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 112</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    :hackney.post(url, [],
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 113</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                  {:multipart, [
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 114</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                    {:file, filename,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 115</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                      {"form-data", [{"name", "json_file"}, {"filename", filename}]},
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 116</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                      [{"Content-Type", "application/json"}]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 117</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                    }
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 118</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                  ]},
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 119</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                  [:with_body])
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 120</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 121</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 122</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.write_html_file.2"></a>
    
    <pre class="irrelevant">  def write_html_file(mod, output) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 123</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {entries, source} = ExCover.Source.analyze_to_html(mod)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 124</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {:ok, s} = StringIO.open(source)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 125</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    lines = Stream.zip(numbers(), IO.stream(s, :line)) |&gt; Stream.map(fn({n, line}) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 126</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      case Map.get(entries, n, nil) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 127</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        {count, anchor} -&gt; {n, {encode_html(line), count, anchor}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 128</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        nil -&gt; {n, {encode_html(line), nil, nil}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 129</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 130</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end) |&gt; Enum.map(&amp;(&amp;1))
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 131</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 132</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    # IO.inspect(lines)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 133</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    content = source_template(mod, lines)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 134</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    File.write("#{output}/#{mod}.html", content)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 135</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 136</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 137</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  # all positive numbers
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 138</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  defp numbers(), do: Stream.iterate(1, &amp;(&amp;1+1))
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 139</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 140</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  def encode_html(s, acc \\ "")
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 141</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  def encode_html("", acc), do: acc
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 142</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.encode_html.2"></a>
    
    <pre class="irrelevant">  def encode_html(s, acc) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 143</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {first, rest} = String.next_grapheme(s)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 144</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    case first do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 145</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      "&gt;" -&gt; encode_html(rest, acc &lt;&gt; "&amp;gt;")
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 146</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      "&lt;" -&gt; encode_html(rest, acc &lt;&gt; "&amp;lt;")
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 147</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      "&amp;" -&gt; encode_html(rest, acc &lt;&gt; "&amp;amp;")
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 148</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      nil -&gt; acc
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 149</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      any -&gt; encode_html(rest, acc &lt;&gt; any)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 150</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 151</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 152</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 153</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.write_module_overview.3"></a>
    
    <pre class="irrelevant">  def write_module_overview(modules, total, output) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 154</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    mods = Enum.map(modules, fn({mod, v}) -&gt; {module_link(mod), v} end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 155</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    content = overview_template("Modules", mods, total)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 156</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    File.write("#{output}/modules.html", content)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 157</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 158</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 159</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.puts_module_overview.2"></a>
    
    <pre class="irrelevant">  def puts_module_overview(modules_summary, total) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 160</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    # mods = Enum.map(modules, fn({mod, v}) -&gt; {module_link(mod), v} end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 161</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    content = overview_text_template(modules_summary, total)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 162</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 163</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    IO.puts content
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 164</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 165</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 166</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.write_function_overview.2"></a>
    
    <pre class="irrelevant">  def write_function_overview(functions, output) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 167</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {fun_sum, total} = calculate_summary(functions)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 168</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 169</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    funs = Enum.map(fun_sum, fn({{m,f,a}, v}) -&gt; {module_link(m, f, a), v} end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 170</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    content = overview_template("Functions", funs, total)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 171</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    File.write("#{output}/functions.html", content)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 172</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 173</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 174</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  defp module_link(mod), do: "&lt;a href=\"#{mod}.html\"&gt;#{mod}&lt;/a&gt;"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 175</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  defp module_link(m, f, a), do: "&lt;a href=\"#{m}.html##{m}.#{f}.#{a}\"&gt;#{m}.#{f}/#{a}&lt;/a&gt;"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 176</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 177</td>
  <td class="num">3</td>
  <td class="elixir">
    
    <pre class="covered">  def module_anchor({m, f, a}), do: "&lt;a name=\"##{m}.#{f}.#{a}\"&gt;&lt;/a&gt;"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 178</td>
  <td class="num">1</td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.module_anchor.1"></a>
    
    <pre class="covered">  def module_anchor(m), do: "&lt;a name=\"##{m}\"&gt;&lt;/a&gt;"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 179</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 180</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  def cover_class(nil), do: "irrelevant"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 181</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  def cover_class(0), do: "not_covered"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 182</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.cover_class.1"></a>
    
    <pre class="irrelevant">  def cover_class(_n), do: "covered"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 183</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 184</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @doc """
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 185</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  Returns detailed coverage data `{mod, mf}` for all modules from the `:cover` application.
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 186</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  The special functions `__info__` and `__struct__` are filtered out of
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 187</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  the list of covered functions.
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 188</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 189</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  ## The `mod` data
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 190</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  The `mod` data is a list of pairs: `{modulename, {no of covered lines, no of uncovered lines}}`
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 191</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 192</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  ## The `mf` data
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 193</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  The `mf` data is list of pairs: `{{m, f, a}, {no of covered lines, no of uncovered lines}}`
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 194</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 195</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  """
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 196</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  @spec coverage_data([atom]) :: {mod_cover, fun_cover}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 197</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.ExCover.Task.coverage_data.1"></a>
    
    <pre class="irrelevant">  def coverage_data(all_modules) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 198</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    modules = Enum.map(all_modules, fn(mod) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 199</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      {:ok, {m, {cov, noncov}}} = :cover.analyse(mod, :coverage, :module)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 200</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      {m, {cov, noncov}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 201</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end) |&gt; Enum.sort
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 202</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    mfunc = Enum.flat_map(all_modules, fn(mod) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 203</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      {:ok, funcs} = :cover.analyse(mod, :coverage, :function)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 204</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      funcs
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 205</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 206</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    |&gt; Enum.reject(fn {{_m, f, _}, _}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 207</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    when f in [:__info__, :__struct__,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 208</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">               :__behaviour_info__, :__protocol__]-&gt; true
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 209</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      _ -&gt; false end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 210</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      |&gt; Enum.sort
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 211</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    {modules, mfunc}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 212</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 213</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 214</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  ## Generate templating functions via EEx, borrowd from ex_doc
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 215</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  templates = [
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 216</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    overview_text_template: [:entries, :total],
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 217</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    overview_entry_text_template: [:entry, :cov, :uncov, :ratio],
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 218</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    overview_template: [:title, :entries, :total],
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 219</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    overview_entry_template: [:entry, :cov, :uncov, :ratio],
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 220</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    source_template: [:title, :lines],
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 221</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    source_line_template: [:number, :count, :source, :anchor]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 222</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  ]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 223</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  Enum.each templates, fn({ name, args }) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 224</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    filename = Path.expand("templates/#{name}.eex", __DIR__)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 225</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    EEx.function_from_file :def, name, filename, args
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 226</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 227</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 228</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  # generates asset files
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 229</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  defp generate_assets(output) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 230</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    Enum.each assets(), fn({ pattern, dir }) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 231</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      output = "#{output}/#{dir}"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 232</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      File.mkdir output
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 233</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 234</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      Enum.map Path.wildcard(pattern), fn(file) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 235</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">        base = Path.basename(file)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 236</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">        File.copy file, "#{output}/#{base}"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 237</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 238</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 239</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 240</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 241</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  # assets are javascript, css and gif resources
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 242</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  defp assets do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 243</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    [{templates_path("css/*.css"), "css"},
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 244</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">     {templates_path("js/*.js"), "js"},
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 245</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">     {templates_path("css/*.gif"), "css"}]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 246</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 247</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 248</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  defp templates_path(other), do: Path.expand("templates/#{other}", __DIR__)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 249</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 250</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  # returns the average percentage, the amount of covered, the amount of uncovered
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 251</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  defp calculate_summary(modules) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 252</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {m, {t_p, t_c, t_u}} = Enum.map_reduce(modules, {0, 0, 0}, fn({e, {c, u}}, acc) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 253</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      {t_percent, t_covered, t_uncovered} = acc
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 254</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      p = (c / (c + u) * 100) |&gt;  Float.round(1)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 255</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 256</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      {{e, {p, c, u}}, {t_percent + p, t_covered + c, t_uncovered + u}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 257</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 258</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 259</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    if t_p &gt; 0 do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 260</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      t_p = t_p
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 261</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">            |&gt; (&amp;//2).(modules |&gt; Enum.count)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 262</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">            |&gt; Float.round(1)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 263</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 264</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      {m, {t_p, t_c, t_u}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 265</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    else
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 266</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      {m, {t_p, t_c, t_u}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 267</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 268</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 269</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">end
</pre>
  </td>
</tr>

        </tbody>
      </table>
    </div>
  </body>
</html>
